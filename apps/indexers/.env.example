# Auto Portal Indexer Environment Configuration

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Autonomys Network Endpoint
# For Taurus testnet (development)
NETWORK_ENDPOINT=wss://rpc.taurus.autonomys.xyz/ws

# For mainnet (production)
# NETWORK_ENDPOINT=wss://rpc.autonomys.xyz/ws

# SubQuery Dictionary Endpoint (for faster sync)
# For Taurus testnet
NETWORK_DICTIONARY=https://dict.taurus.autonomys.xyz

# For mainnet
# NETWORK_DICTIONARY=https://dict.autonomys.xyz

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Settings
DB_HOST=postgres-staking
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_DATABASE=staking

# Connection Pool Settings
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT_MS=5000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Settings (for worker coordination and caching)
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=your_redis_password_if_needed

# Alternative Redis URL format (overrides individual settings)
# REDIS_URL=redis://localhost:6379

# =============================================================================
# SUBQUERY INDEXER CONFIGURATION
# =============================================================================

# SubQuery Node Settings
SUBQUERY_NODE_PORT=3000
SUBQUERY_QUERY_PORT=3001

# Indexer Performance Settings
WORKERS=4
BATCH_SIZE=100
TIMEOUT=60000

# =============================================================================
# STAKING WORKER CONFIGURATION
# =============================================================================

# Worker Processing Settings
BATCH_SIZE=100
QUEUE_PROCESSING_INTERVAL_MS=1000
MAX_RETRIES=3
RETRY_DELAY_MS=5000

# Performance Configuration
MAX_CONCURRENT_BATCHES=2

# Health Check Configuration
DB_HEALTH_CHECK_INTERVAL_MS=30000
CHAIN_HEAD_POLL_INTERVAL_MS=6000

# Staking Specific Configuration
EPOCH_TRANSITION_CHECK_INTERVAL_MS=12000
SHARE_PRICE_CALCULATION_ENABLED=false

# Finality Configuration (only process events this many blocks behind chain tip)
FINALITY_THRESHOLD=100
CHAIN_TIP_UPDATE_INTERVAL_MS=10000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Level (error, warn, info, debug)
LOG_LEVEL=info
ENABLE_DEBUG_LOGS=false

# =============================================================================
# ENVIRONMENT
# =============================================================================

# Environment (development, staging, production)
NODE_ENV=development

# =============================================================================
# DOCKER COMPOSE OVERRIDES
# =============================================================================

# Uncomment and modify these if you need different Docker settings

# Custom PostgreSQL settings
# POSTGRES_DB=staking
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres

# Custom ports (if default ports conflict)
# POSTGRES_PORT=5432
# REDIS_PORT=6379
# SUBQUERY_NODE_PORT=3000
# SUBQUERY_QUERY_PORT=3001
# CADDY_HTTP_PORT=8000
# CADDY_HTTPS_PORT=8001

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Node.js Settings
# NODE_OPTIONS=--max-old-space-size=4096

# SubQuery Advanced Settings
# SUBQL_FORCE_CLEAN=true
# SUBQL_DISABLE_HISTORICAL=false

# Worker Queue Names (for multiple environments)
# STAKING_QUEUE_NAME=staking:updates:queue
# OPERATOR_QUEUE_NAME=staking:operators:queue
# WITHDRAWAL_QUEUE_NAME=staking:withdrawals:queue

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Skip these in production

# Enable hot reload for development
# SUBQL_ENABLE_HOT_RELOAD=true

# Development database reset
# RESET_DATABASE_ON_START=false 